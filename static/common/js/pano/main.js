function FastClick(t){var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(i,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(i,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(i,arguments)},FastClick.notNeeded(t)||(this.deviceIsAndroid&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,i.hijacked||i,n):o.call(t,e,i,n)},t.addEventListener=function(e,i,n){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}define("app/Config",["jquery"],function(t){var e={root:location.href.substr(0,location.href.lastIndexOf("/")+1),langVideoMute:"Mute",langVideoUnmute:"Unmute",langVideoPlay:"Play",langVideoPause:"Pause"},i=t.extend({},e,window.app_config);return{get:function(t){return i[t]},set:function(t,e){i[t]=e}}}),define("app/credits",[],function(){var t="";return t}),define("app/plugins",["app/credits"],function(){return!0}),function(t){"function"==typeof define&&define.amd?define("mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,r=c.call(arguments,1),h=0,l=0,d=0,u=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(l=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(l=-1*d,d=0),h=0===d?l:d,"deltaY"in a&&(d=-1*a.deltaY,h=d),"deltaX"in a&&(l=a.deltaX,0===d&&(h=-1*l)),0!==d||0!==l){if(1===a.deltaMode){var p=t.data(this,"mousewheel-line-height");h*=p,d*=p,l*=p}else if(2===a.deltaMode){var f=t.data(this,"mousewheel-page-height");h*=f,d*=f,l*=f}return u=Math.max(Math.abs(d),Math.abs(l)),(!s||s>u)&&(s=u,n(a,u)&&(s/=40)),n(a,u)&&(h/=40,l/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/s),l=Math[l>=1?"floor":"ceil"](l/s),d=Math[d>=1?"floor":"ceil"](d/s),e.deltaX=l,e.deltaY=d,e.deltaFactor=s,e.deltaMode=0,r.unshift(e,h,l,d),o&&clearTimeout(o),o=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,r)}}function i(){s=null}function n(t,e){return l.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(t.event.fixHooks)for(var h=a.length;h;)t.event.fixHooks[a[--h]]=t.event.mouseHooks;var l=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=r.length;i;)this.addEventListener(r[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",l.getLineHeight(this)),t.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(t(e)["offsetParent"in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),define("hv/net/HTMLLoader",["jquery"],function(t){var e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,i=/<body\b[^>]*>([\s\S]*?)<\/body>/gim,n={ignoreInlineScript:!1},o=function(e){this.options=t.extend({},n,e),this.loading=!1};return o.prototype.load=function(e,i,n){var o=this;n=n||{},n.success=function(t){o.handleSuccess(t,i)},this.loading=!0,this.xhr=t.ajax(e,n)},o.prototype.isLoading=function(){return this.loading},o.prototype.handleSuccess=function(n,o){var s=(t('<div id="#body">'),n);s.indexOf("<body")>=0&&(s=n.match(i)[0]),!this.options.ignoreInlineScript&&s.indexOf("<script")&&(s=s.replace(e,"")),o&&o(s,n),this.xhr=null,this.loading=!1},o.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null,this.loading=!1)},o.prototype.dispose=function(){this.cancel()},o}),define("app/3d/Point.class",["jquery"],function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.setPosition=function(t,e){this.x=t||0,this.y=e||0},t.prototype.translate=function(t,e){this.x+=t,this.y+=e},t}),define("app/3d/Point3d.class",["jquery"],function(){function t(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}return t.prototype.setPosition=function(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0},t.prototype.translate=function(t,e,i){this.x+=t,this.y+=e,this.z+=i},t}),define("hv/util/MathX",["jquery","app/3d/Point.class"],function(e,i){function n(t,e,i,n){var o=1-t;return o*o*e+2*o*t*i+t*t*n}var o={range:function(t,e,i){return Math.max(e,Math.min(t,i))},outsideRange:function(t,e,i){return e>t||t>i?t:Math.abs(t-e)<Math.abs(t-i)?e:i},deCasteljau:function(t,e,n,o,s){var a=(1-t)*e.x+t*o.x,r=(1-t)*e.y+t*o.y,c=(1-t)*o.x+t*s.x,h=(1-t)*o.y+t*s.y,l=(1-t)*s.x+t*n.x,d=(1-t)*s.y+t*n.y,u=(1-t)*a+t*c,p=(1-t)*r+t*h,f=(1-t)*c+t*l,m=(1-t)*h+t*d,y=(1-t)*u+t*f,g=(1-t)*p+t*m;return new i(y,g)},currentPoint:function(t,e,n,o,s){var a=t*t*t,r=t*t,c=3*(n.x-e.x),h=3*(n.y-e.y),l=3*(o.x-n.x)-c,d=3*(o.y-n.y)-h,u=s.x-e.x-c-l,p=s.y-e.y-h-d,f=u*a+l*r+c*t+e.x,m=p*a+d*r+h*t+e.y;return new i(f,m)},getQuadraticCurvePoint:function(t,e,o,s){return new i(n(t,e.x,s.x,o.x),n(t,e.y,s.y,o.y))},distance:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},distance3d:function(t,e){var i=t.x-e.x,n=t.y-e.y,o=t.z-e.z;return Math.sqrt(i*i+n*n+o*o)},cubicN:function(t,e,i,n,o){var s=t*t,a=s*t;return e+(3*-e+t*(3*e-e*t))*t+(3*i+t*(-6*i+3*i*t))*t+(3*n-3*n*t)*s+o*a},getCubicBezierXYatT:function(t,e,n,s,a){var r=o.cubicN(t,e.x,s.x,a.x,n.x),c=o.cubicN(t,e.y,s.y,a.y,n.y);return new i(r,c)},sgn:function(t){return 0>t?-1:1},sortSpecial:function(t){var e,i;do{e=!1;for(var n=0;n<t.length-1;n++)(t[n+1]>=0&&t[n]>t[n+1]||t[n]<0&&t[n+1]>=0)&&(e=!0,i=t[n],t[n]=t[n+1],t[n+1]=i)}while(e);return t},cubicRoots:function(t){var e,i,n,s,a,r,c=t[0],h=t[1],l=t[2],d=t[3],u=h/c,p=l/c,f=d/c,e=(3*p-Math.pow(u,2))/9,i=(9*u*p-27*f-2*Math.pow(u,3))/54,n=Math.pow(e,3)+Math.pow(i,2),m=Array();if(n>=0){var s=o.sgn(i+Math.sqrt(n))*Math.pow(Math.abs(i+Math.sqrt(n)),1/3),a=o.sgn(i-Math.sqrt(n))*Math.pow(Math.abs(i-Math.sqrt(n)),1/3);m[0]=-u/3+(s+a),m[1]=-u/3-(s+a)/2,m[2]=-u/3-(s+a)/2,r=Math.abs(Math.sqrt(3)*(s-a)/2),0!=r&&(m[1]=-1,m[2]=-1)}else{var y=Math.acos(i/Math.sqrt(-Math.pow(e,3)));m[0]=2*Math.sqrt(-e)*Math.cos(y/3)-u/3,m[1]=2*Math.sqrt(-e)*Math.cos((y+2*Math.PI)/3)-u/3,m[2]=2*Math.sqrt(-e)*Math.cos((y+4*Math.PI)/3)-u/3,r=0}for(var g=0;3>g;g++)(m[g]<0||m[g]>1)&&(m[g]=-1);return m=o.sortSpecial(m)},bezierCoeffs:function(t,e,i,n){var o=Array();return o[0]=-t+3*e+-3*i+n,o[1]=3*t-6*e+3*i,o[2]=-3*t+3*e,o[3]=t,o},computeIntersections:function(e,n,s,a,r,c){var h=!1,l=Array(),d=a[1]-a[0],u=s[0]-s[1],p=s[0]*(a[0]-a[1])+a[0]*(s[1]-s[0]),f=o.bezierCoeffs(e[0],e[1],e[2],e[3]),m=o.bezierCoeffs(n[0],n[1],n[2],n[3]),y=Array();y[0]=d*f[0]+u*m[0],y[1]=d*f[1]+u*m[1],y[2]=d*f[2]+u*m[2],y[3]=d*f[3]+u*m[3]+p;var g=o.cubicRoots(y);h&&(c.strokeStyle="#00cc00",c.lineWidth=1,c.globalAlpha=1,c.moveTo(e[0],n[0]),c.bezierCurveTo(e[1],n[1],e[2],n[2],e[3],n[3]),c.stroke(),c.strokeStyle="#ff0000",c.lineWidth=1,c.moveTo(s[0],a[0]),c.lineTo(s[1],a[1]),c.stroke());for(var v=1e6,w=0,x=[],k=0;3>k;k++){t=g[k],l[0]=f[0]*t*t*t+f[1]*t*t+f[2]*t+f[3],l[1]=m[0]*t*t*t+m[1]*t*t+m[2]*t+m[3];var b;b=s[1]-s[0]!=0?(l[0]-s[0])/(s[1]-s[0]):(l[1]-a[0])/(a[1]-a[0]),(0>t||t>1||0>b||b>1)&&(l[0]=-100,l[1]=-100),x.push({x:l[0],y:l[1]}),h&&(c.beginPath(),c.lineWidth=1,c.rect(x[k].x,x[k].y,10,10),c.strokeStyle="#0000ff",c.stroke());var C=o.distance(r,new i(l[0],l[1]));return v>C&&(w=k,v=C),new i(l[0],l[1])}return h&&(c.beginPath(),c.lineWidth=1,c.rect(x[w].x,x[w].y,10,10),c.strokeStyle="#00FF00",c.stroke()),new i(x[w].x,x[w].y)}};return o}),define("app/3d/Math3d.class",["jquery","app/3d/Point.class","app/3d/Point3d.class","hv/util/MathX"],function(t,e,i,n){function o(){}var s,a,r=40,c=2500,h=0;return o.prototype.setCameraPos=function(t){this.cameraPos=t},o.prototype.setCenter=function(t,e){this.centerX=t,this.centerY=e},o.prototype.setWindowSize=function(t,e){this.windowW=t,this.windowH=e},o.prototype.addStagePosition=function(t){return new e(t.x+this.centerX-(this.cameraPos.x+h),t.y+this.centerY-this.cameraPos.y)},o.prototype.setAngle=function(t){s=Math.sin(t),a=Math.cos(t)},o.prototype.rotate3d=function(t){var e=a*t.x+s*(t.z+this.cameraPos.z+50),n=-s*t.x+a*(t.z+this.cameraPos.z+50);return new i(e,t.y,n-50)},o.prototype.project=function(t){pz=t.z;var i=c/(c-pz)*(t.x-(this.cameraPos.x+h))+(this.cameraPos.x+h),n=c/(c-pz)*(-t.y-this.cameraPos.y)+this.cameraPos.y;return new e(i,n)},o.prototype.getScale=function(t,e){var o=new i(t.x,t.y,t.z);o.x+=100;var s=this.project(o),a=Math.abs(e.x-s.x)/100;return n.range(a,0,r)},o.prototype.getAlpha=function(t){var e=1;return t.z>1200?e=n.range((1200-2*(t.z-1200))/500,0,1):t.z<-1500&&(e=n.range((t.z+6e3)/4500,0,1)),e},o.prototype.getAlphaCloud=function(t){var e=1;return t.z>600?e=n.range((600-2*(t.z-600))/500,0,1):t.z<-4e3&&(e=n.range((t.z+7e3)/3e3,0,1)),e},o}),define("app/3d/Camera3d.class",["jquery","app/3d/Point.class","app/3d/Point3d.class","hv/util/MathX"],function(t,e,i,n){function o(t,e,n){this.ctx=n,this.math3d=t,this.position=new i,this.maxZPos=e,this.a=0,this.tA=0,this.tX=0,this.tY=0,this.tZ=0,this.aDif=0,this.xDif=0,this.yDif=0,this.isGoingDirectly=!1}function s(t){return t/=.5,1>t?.5*t*t:(t-=2,-.5*(t*t-2))}var a=600,r=2e3;return o.prototype.countNextPos=function(){var t=1==this.isGoingDirectly?r:a,e=10,i=(this.tA+this.aDif-this.a)/e;i=n.range(i,-.02,.02);var o=(this.tX+this.xDif-this.position.x)/e;o=n.range(o,-t,t);var s=(this.tY+this.yDif-this.position.y)/e;s=n.range(s,-t,t),this.isGoingDirectly&&(s=n.range(s,-t/10,t/10)),this.tZ=n.range(this.tZ,-4e3,this.maxZPos);var c=(this.tZ-this.position.z)/10;c=n.range(c,-t,t),this.a+=i,this.position.x+=o,this.position.y+=s,this.position.z+=c,this.math3d.setAngle(this.a),this.math3d.setCameraPos(this.position)},o.prototype.setMaxZPos=function(t){this.maxZPos=t},o.prototype.setPosition=function(t,e,i){this.tX=t,this.tY=e,this.tZ=i,this.position.x=t,this.position.y=e,this.position.z=i},o.prototype.move=function(t,e,i){this.tX+=t,this.tY+=e,this.tZ+=i,this.isGoingDirectly=!1},o.prototype.setTargetXY=function(t,e){this.tX=t,this.tY=e},o.prototype.setTargetZ=function(t){this.tZ=t},o.prototype.findCurrentCameraPos=function(t,e){var i=(-this.position.z-t.z)/(e.z-t.z);0>i?e=t:i=s(i);var n=(e.x-t.x)*i+t.x,o=(e.y-t.y)*i+t.y;0==this.isGoingDirectly&&this.setTargetXY(n,-o)},o.prototype.setSplinesData=function(t){this.splinesData=t},o.prototype.findCurrentCameraPosBezier=function(t,e){t>e&&(tmp=e,e=t,t=tmp);var i=this.splinesData[t],o=this.math3d.addStagePosition(this.math3d.project(this.math3d.rotate3d(i[0]))),s=this.math3d.addStagePosition(this.math3d.project(this.math3d.rotate3d(i[1]))),a=this.math3d.addStagePosition(this.math3d.project(this.math3d.rotate3d(i[2]))),r=this.math3d.addStagePosition(this.math3d.project(this.math3d.rotate3d(i[3]))),c=(-this.position.z-i[0].z)/(i[3].z-i[0].z);p==e&&(c=1-c),p=n.deCasteljau(+c,o,r,s,a);(r.x-o.x)*c+o.x,(r.y-o.y)*c+o.y;0==this.isGoingDirectly&&this.setTargetXY(o.x,o.y),this.ctx.beginPath(),this.ctx.strokeStyle="#aaaaaa",this.ctx.moveTo(o.x,o.y),this.ctx.bezierCurveTo(s.x,s.y,a.x,a.y,r.x,r.y),this.ctx.moveTo(0,0),this.ctx.lineTo(100,100),this.ctx.stroke()},o.prototype.setAngle=function(t){this.tA=t*Math.PI/180},o.prototype.getAngle=function(){return 180*this.tA/Math.PI},o.prototype.setAngleDif=function(t){this.aDif=-20*t*Math.PI/180},o.prototype.setPositionDif=function(t,e){this.xDif=50*t,this.yDif=50*e,this.setAngleDif(t/15)},o}),define("app/Helpers",["jquery"],function(t){function e(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var i=(navigator.userAgent.match(/webkit/i),navigator.userAgent.indexOf("Trident")>=0),n={isTouchDevice:function(){return"ontouchstart"in window},translate:function(n,o,s,a,r,c,h,l,d){if(void 0!=h){var u=.01>h,p=u?"hidden":"visible";if(n.style.display=u?"none":"block",n.style.visibility=p,u)return;n.style.opacity=e(h,15)}if(l||(l=0),o||(o=0),s||(s=0),a||(a=0),r||(r=0),c||(c=1),c=e(c,15),!Modernizr.csstransforms3d||d||i)Modernizr.csstransforms?(t(n).css({transform:"translate("+e(o,15)+"px,"+e(s,15)+"px) scale("+c+") rotate("+e(r,15)+"deg)"}),n.style.zIndex=l):(n.style.display=o>3e3||s>2e3||-1e3>o||-1e3>s?"none":"block",n.style.left=Math.round(o)+"px",n.style.top=Math.round(s)+"px",n.style.zIndex=l);else{var f="translateZ("+e(a||l,15)+"px) translateX("+e(o,15)+"px) translateY("+e(s,15)+"px) scale3d("+c+","+c+","+c+")  rotateZ("+e(r,15)+"deg)";n.style.webkitTransform=f,n.style.transform=f}void 0!=h&&(n.style.opacity=e(h,15))},translate2d:function(t,e,i,n,o,s,a,r){this.translate(t,e,i,n,o,s,a,r,!0)},hide:function(t){t.style.visibility="hidden"},show:function(t){t.style.visibility="visible"}};return n}),define("app/3d/Cloud3d.class",["jquery","app/3d/Point3d.class","app/Helpers","app/Config"],function(t,e,i,n){function o(t,i){this.cont=t,this.path=i,this.position=new e,this.createElementDiv(),this.scale=4+4*Math.random(),this.rotation=360*Math.random()}var s=0,a=n.get("randomClouds");return o.prototype.setPosition=function(t,e,i){this.position.setPosition(t,e,i)},o.prototype.getPosition=function(){return this.position},o.prototype.render=function(t,e,n){var o=0;o=parseInt(200*e)+600,i.translate(this.$text[0],t.x,t.y,o,0,e*this.scale,n.toFixed(7),o)},o.prototype.createElementDiv=function(){var e='<div class="cloud3dCont">',i=Math.floor(Math.random()*a.length);this.p=void 0==this.path?a[i]:this.path,e+='<img class="cloud3d" src="'+this.p+'">',e+="</div>",this.$text=t(e),this.$text.attr("id","cloud-"+ ++s);var n=120*Math.random()+80+"s";this.$text.children()[0].style.webkitAnimationDuration=n,Math.random()>.5&&(this.$text.children()[0].style.webkitAnimationDirection="reverse"),this.cont.append(this.$text)},o}),define("app/3d/Clouds3d.class",["jquery","app/3d/Cloud3d.class","app/Helpers"],function(t,i){function n(e){this.clouds=[],this.math3d=e,this.cont=t("#cloudscontainerid"),this.zTaken={}}return n.prototype.buildCloud=function(t,n,o,s){for(e=new i(this.cont,s),this.clouds.push(e);this.zTaken[Math.floor(o/10)];)o+=10;return this.zTaken[Math.floor(o/10)]=!0,e.setPosition(t,n,o),e},n.prototype.render=function(t){var e,i,n,o,s,a,r,c;for(e=0;e<this.clouds.length;e++){i=this.clouds[e],n=i.getPosition(),c=this.math3d.cameraPos,o=this.math3d.rotate3d(n),s=this.math3d.project(o),a=this.math3d.getScale(o,s);var r=this.math3d.getAlphaCloud(o,a);s=this.math3d.addStagePosition(s),i.render(s,a,r,t)}},n}),define("app/3d/Element3d.class",["jquery","app/3d/Point.class","app/3d/Point3d.class","app/Helpers"],function(t,e,i,n){function o(n,o){this.id=n,this.element=o[0],this.position=new i,this.isHidden=!1,this.position2d=new e,this.alpha,this.isLinkClicked=!1,this.currentScale;var s=this;o.on("click",function(){s.isLinkClicked||t(s).trigger("onclick"),s.isLinkClicked=!1}),t(".js-content-link",o).on("click",function(e){e.preventDefault(),s.isLinkClicked=!0,t(s).trigger("onlinkclick")})}return o.prototype.showLoader=function(){t("a",this.element).addClass("contentlinkloader")},o.prototype.hideLoader=function(){t("a",this.element).removeClass("contentlinkloader")},o.prototype.getLoaderPosition=function(){var e=t(".element3dtexts a",this.element),i=e.offset(),n=15,o=8;return this.currentScale?(i.left+=(e.width()+n)*this.currentScale,i.top+=o*this.currentScale):(i.left+=e.width()+n,i.top+=o),i},o.prototype.getHref=function(){return t(".js-content-link",this.element).attr("href")},o.prototype.setPosition=function(t,e,i){this.position.setPosition(t,e,i)},o.prototype.getPosition=function(){return this.position},o.prototype.render=function(t,e,i){this.position2d=t,this.alpha=i,this.currentScale=e;var o=0;o=parseInt(200*e)+600,this.zindex=o,0==i?(this.isHidden||n.hide(this.element),1==this.isHidden):(n.translate(this.element,t.x,t.y,0,0,e,i,o),0==this.isHidden)},o}),define("app/3d/CameraSplines.class",["jquery","app/3d/Point3d.class","hv/util/MathX"],function(t,e){function o(t){var e=[];for(i=0;i<t.length;i++)e.push(t[i].position);this.p=this.computeSmoothPath(e)}return o.prototype.computeSmoothPath=function(t){var i,n=[],o=[],s=[];for(i=0;i<t.length;i++)n[i]=t[i].x,o[i]=t[i].y,s[i]=t[i].z;var a=this.computeControlPoints(n),r=this.computeControlPoints(o),c=this.computeControlPoints(s);for(p=[],i=0;i<t.length-1;i++)p.push([new e(n[i],o[i],s[i]),new e(a.p1[i],r.p1[i],c.p1[i]),new e(a.p2[i],r.p2[i],c.p2[i]),new e(n[i+1],o[i+1],s[i+1])]);return p},o.prototype.computeControlPoints=function(t){for(p1=[],p2=[],n=t.length-1,a=[],b=[],c=[],r=[],a[0]=0,b[0]=2,c[0]=1,r[0]=t[0]+2*t[1],i=1;n-1>i;i++)a[i]=1,b[i]=4,c[i]=1,r[i]=4*t[i]+2*t[i+1];for(a[n-1]=2,b[n-1]=7,c[n-1]=0,r[n-1]=8*t[n-1]+t[n],i=1;n>i;i++)m=a[i]/b[i-1],b[i]=b[i]-m*c[i-1],r[i]=r[i]-m*r[i-1];for(p1[n-1]=r[n-1]/b[n-1],i=n-2;i>=0;--i)p1[i]=(r[i]-c[i]*p1[i+1])/b[i];for(i=0;n-1>i;i++)p2[i]=2*t[i+1]-p1[i+1];return p2[n-1]=.5*(t[n]+p1[n-1]),{p1:p1,p2:p2}},o}),define("app/3d/Elements3d.class",["jquery","app/3d/Clouds3d.class","app/3d/Element3d.class","app/Helpers","app/3d/CameraSplines.class"],function(t,e,i){function n(i,n,o){this.elementsData=i,this.elements=[],this.elementsHash={},this.math3d=n,this.cont=t("#elementscontainerid"),this.camera3d=o,this.levelsFirstElements=[],this.closest,this.secondClosest,clouds3d=new e(this.math3d),this.buildElements()}function o(t,e){var i=Math.random()>.5?1:-1;return i*(Math.random()*(e-t)+t)}var s=150,a=5e3,r=a/3,c=1e3;n.EL_Z_DIFF=a,n.EL_Z_DIFF_LVL4=2*a;var h,l=12e3;return n.prototype.buildElements=function(){function e(e,f){var m=f.el,y=f.id,g=f.level,v=h.elementsData[e-1]||{},w=h.elementsData[e+1]||{},x=new i(y,m);x.invisible=!!f.invisible,x.index=e,x.data=f,h.elementsHash[y]=x,g>d&&1!=x.invisible&&(d=g,u=e,h.levelsFirstElements.push(e),4==d&&void 0==h.fourthLayerZ&&(p-=.5*a,h.fourthLayerZ=p));var k=Math.random()*c-.5*c+e*s+(g-1)*l,b=p,C=a;1==g?C/=1.4:3==g?C/=1.2:4==g&&(C=n.EL_Z_DIFF_LVL4),Boolean(f.invisible)+Boolean(w.invisible)===1&&(C=4>g?a/1.5:a/5),p-=C,r=C/3;var M=Math.random()*r-.5*r;0==e&&(M=0,k=e*s+(g-1)*l),f.invisible&&!v.invisible?(M=v.position.x,k=v.position.y):!f.invisible&&v.invisible&&(v.position.x=M,v.position.y=k),x.setPosition(M,k,b),h.elements.push(x),h.elementsData[e].position=x.getPosition(),t(x).on("onclick",function(){h.onElement(this)}),"1"==g?t(x).on("onlinkclick",function(t){t.preventDefault(),h.onLvl1Anchor(this.index)}):t(x).on("onlinkclick",function(t){t.preventDefault(),h.onAnchor(this)});var E=x.getPosition(),P=t(".element3dimage",m),L=P.data("offset");L&&P.css({margin:-L.y+"px "+-L.x+"px"});var D=t(".element3dcloud",m),L=D.data("offset");if(L&&D.css({margin:-L.y+"px "+-L.x+"px"}),"2"==g)for(var T,S=4*Math.random()+4,I=0;S>I;I++)T=Math.random()>.4?Math.random()>.3?clouds3d.buildCloud(E.x+o(0,1500),E.y-400-800*Math.random(),E.z+o(50,C/1.2)):clouds3d.buildCloud(E.x+o(0,1500),E.y+400+800*Math.random(),E.z+o(50,C/1.2)):clouds3d.buildCloud(E.x+o(500,2e3),E.y+o(0,800),E.z+o(50,C/1.2)),T.scale=5+Math.random()*(Math.abs(T.position.x-E.x)/300*Math.abs(T.position.y-E.y)/300),T.$text.attr("for",y);"4"==g&&t(m).css({display:"none"})}var h=this,d=(t("#elementscontainerid"),1),u=1;this.levelsFirstElements.push(0);var p=0,f=0;for(f=0;f<this.elementsData.length;f++){var m=this.elementsData[f];e(f,m)}void 0==h.fourthLayerZ&&(p-=.5*a,h.fourthLayerZ=p),this.maxZPos=p},n.prototype.getMaxZPos=function(){return-this.maxZPos},n.prototype.getFourthLayerZ=function(){return-this.fourthLayerZ},n.prototype.onElement=function(e){t(this).trigger("onclick",[e])},n.prototype.onLvl1Anchor=function(e){t(this).trigger("onlvl1linkclick",e)},n.prototype.onAnchor=function(e){h=e,e.showLoader();var i=e.getLoaderPosition();t(this).trigger("onlinkclick",{href:e.getHref(),pos:i})},n.prototype.hideLoader=function(){h.hideLoader()},n.prototype.render=function(t){clouds3d.render(t);{var e,i,n,o,s,a;this.math3d.cameraPos.z}for(e=0;e<this.elements.length;e++){i=this.elements[e],n=i.getPosition(),o=this.math3d.rotate3d(n),s=this.math3d.project(o),a=this.math3d.getScale(o,s);var r=this.math3d.getAlpha(o,a);this.elementsData[e].alpha=r,s=this.math3d.addStagePosition(s),i.render(s,a,r,t)}},n.prototype.getElementById=function(t){return this.elementsHash[t]},n.prototype.findClosest=function(){var t=this.math3d.cameraPos.z,e=this.closest=this.findClosestElementAt(t),i=e.getPosition().z+t;this.secondClosest=this.findClosestElement(function(n){var o=n.getPosition().z+t,s=o>=0&&0>i||0>o&&i>=0;return n!=e&&s}),this.secondClosest||(this.secondClosest=this.findClosestElement(function(t){return t!=e}))},n.prototype.findClosestElement=function(t){return this.findClosestElementAt(this.math3d.cameraPos.z,t)},n.prototype.findClosestElementAt=function(t,e){var i,n,o=-1,s=1e9;for(i=0;i<this.elements.length;i++)n=Math.abs(t+this.elements[i].getPosition().z),s>n&&(!e||e(this.elements[i]))&&(o=i,s=n);return this.elements[o]},n.prototype.isClosestVisible=function(){var t=this.closest;if(void 0==t)return!1;if(t.alpha<1)return!1;var e=t.position2d;return e.x<0||e.x>this.math3d.windowW||e.y<0||e.y>this.math3d.windowH?!1:!0},n.prototype.getLevelFirstElement=function(t){return this.levelsFirstElements[t-1]},n.prototype.getElementPos=function(t){return this.elements[t].getPosition()},n.prototype.getElementHref=function(t){return this.elements[t].getHref()},n.prototype.getLoaderPosition=function(t){return h=this.elements[t],h.showLoader(),this.elements[t].getLoaderPosition()},n}),define("app/3d/Line3d.class",["jquery","app/Helpers","app/Config"],function(t,e,i){function n(t,e,i,n,o,s,a){this.from=t,this.to=e,this.bezier1=i,this.bezier2=n,this.fromId=o,this.toId=s,this.cont=a,this.innetCont,this.isHidden=!0,this.isHighlighted=!1,this.isOver=!1,this.isLineHidden=!1,this.isRouteNetworkHidden=!1,this.createElementDiv()}var o=.4,s="100, 100, 100, ",a="204, 0, 0, ";return n.prototype.render=function(t,e,i,n,r,c,h,l){.2>=c&&(c=.2),.2>=h&&(h=.2),t.beginPath(),t.strokeStyle="#cccccc",t.moveTo(e.x,e.y);var d=s;this.isOver||this.isHighlighted&&this.toElementId==this.targetId?(d=a,o=.4):o=.2;var u=t.createLinearGradient(e.x,e.y,i.x,i.y);u.addColorStop(0,"rgba("+d+ +(c*o*l).toFixed(5)+")"),u.addColorStop(1,"rgba("+d+ +(h*o*l).toFixed(5)+")"),t.strokeStyle=u,r?t.bezierCurveTo(n.x,n.y,r.x,r.y,i.x,i.y):n?t.quadraticCurveTo(n.x,n.y,i.x,i.y):t.lineTo(i.x,i.y),t.stroke()},n.prototype.setTxt=function(t,n,o,s){if(this.targetId=s,this.isHighlighted)if(this.toElementId==this.targetId){var a=i.get("langThemerouteNext").split("%name%");n=a.length>1?"<span class='nextitem'>"+a[0]+n+a[1]+"</span>":"<span class='nextitem'>"+a[0]+n+"</span>"}else{var a=i.get("langThemeroutePrev").split("%name%");n=a.length>1?"<span class='previtem'>"+a[0]+n+a[1]+"</span>":"<span class='previtem'>"+a[0]+n+"</span>"}this.$innerCont.html(n),this.showLabel(),o&&(t.x-=this.$text.width()+20),this.$text&&e.translate(this.$text[0],t.x+10,t.y,0,0,1)},n.prototype.createElementDiv=function(){this.$text=t('<div class="worlds3dlabel"></div>'),this.$innerCont=t('<a class="world3dlabeltext"></a>'),this.$text.append(this.$innerCont),this.cont.append(this.$text),this.$text.css({opacity:0,display:"none"}),this.addMouseHandlers()},n.prototype.addMouseHandlers=function(){var t=this;this.$text.on("click",function(e){e.preventDefault(),t.dispatchClick(),t.isMouseDown=!1}),this.$text.on("mousedown",function(){t.isMouseDown=!0}),this.$text.on("mouseup",function(e){1==t.isMouseDown&&(e.preventDefault(),t.dispatchClick()),t.isMouseDown=!1}),this.$text.on("mouseenter",function(){t.onMouseEnter()}),this.$text.on("mouseleave",function(){t.onMouseLeave(),t.isMouseDown=!1})},n.prototype.onMouseEnter=function(){this.isOver=!0},n.prototype.onMouseLeave=function(){this.isOver=!1},n.prototype.dispatchClick=function(){this.$text.trigger("onclick",[this.targetId]),this.$text.trigger("wos-worlds3d-label-click")},n.prototype.hideLabel=function(){this.isHidden||(this.$text.stop().animate({opacity:0},{duration:100,complete:function(){t(this).css({display:"none"})}}),this.isHidden=!0)},n.prototype.showLabel=function(){this.isHidden&&0==this.isRouteNetworkHidden&&(this.$text.animate({opacity:1},400).css({display:"block"}),this.isHidden=!1)},n.prototype.highlight=function(t){this.isHighlighted=!0,this.toElementId=t,this.$text.addClass("highlighted")},n.prototype.dehighlight=function(){this.isHighlighted=!1,this.$text.removeClass("highlighted")},n.prototype.hide=function(){this.isLineHidden=!0},n.prototype.show=function(){this.isLineHidden=!1},n.prototype.hideRouteNetwork=function(){this.isRouteNetworkHidden=!0},n}),define("app/3d/Lines3d.class",["jquery","app/3d/Point.class","app/3d/Point3d.class","app/3d/Line3d.class","hv/util/MathX","app/Config"],function(t,e,i,n,o,s){function a(e,i,n,o,s,a){this.elements=e,this.elementsData=i,this.connections=[],this.connectionsData=n,this.autoroutesData=o,this.isRouteHighlighted=!1,this.routeData,this.ctx=s,this.math3d=a,this.cont=t("#labelscontainerid"),this.buildAutoConnections()}function r(t,e){return e/=1.5,t+=(t?t/Math.abs(t):1)*e,t*=-1}var c,h=10,l=29,d=10,u=50,p=!1,f=-100,m=0;return a.prototype.buildAutoConnections=function(){for(var e=this,o=0;o<this.connectionsData.length;o++){var a=this.getElementById(this.connectionsData[o].id1),r=this.getElementById(this.connectionsData[o].id2);if(-1!=a&&-1!=r){var c=-90;1==+this.elementsData[a].level&&(c=27);var h=this.elements[a].getPosition(),l=new i(h.x,h.y+c,h.z),d=this.elements[r].getPosition(),u=new i(d.x,d.y-90,d.z),c=-500;1==+this.elementsData[a].level&&(c=500);var p=new i(l.x,l.y+c,l.z),f=new i(u.x,u.y-500,u.z),m=new n(l,u,p,f,a,r,this.cont);m.$text.bind("onclick",function(i,n){t(e).trigger("onclick",[n])}),this.connections.push(m),"true"==s.get("isRouteNetworkOff")&&(4==+this.elementsData[a].level||4==+this.elementsData[r].level||void 0==+this.elementsData[a].level||void 0==+this.elementsData[r].level)&&m.hideRouteNetwork()}}},a.prototype.setLabelsTimer=function(){m=0,p=!0},a.prototype.renderConnections=function(t,i){{var n,s,a,y,g,v,w,x,k=0,b=k,C=0,M=0,E=M,P=[[0,this.math3d.windowW],[0,this.math3d.windowW],[d,d],[this.math3d.windowW-u,this.math3d.windowW-u]],L=[[h,h],[this.math3d.windowH-l,this.math3d.windowH-l],[0,this.math3d.windowH],[0,this.math3d.windowH]],D=[];this.elementsData[t].level}f!=t&&(f=t,p=!1,c&&clearTimeout(c),c=setTimeout(this.setLabelsTimer,250)),m+=(1-m)/20;for(var T=0;T<this.connections.length;T++)if(n=this.connections[T],!n.isLineHidden&&!n.isRouteNetworkHidden)if(p){var S=n.fromId,I=n.toId;if(S==t||I==t){var z=this.math3d.rotate3d(n.from),F=this.math3d.rotate3d(n.to);s=this.math3d.addStagePosition(this.math3d.project(z)),a=this.math3d.addStagePosition(this.math3d.project(F));var H=Math.sqrt(o.distance3d(n.from,n.to));y=null,n.bezier1&&(y=this.math3d.rotate3d(n.bezier1),y=this.math3d.addStagePosition(this.math3d.project(y))),g=null,n.bezier2&&(g=this.math3d.rotate3d(n.bezier2),g=this.math3d.addStagePosition(this.math3d.project(g))),w=this.elementsData[n.fromId].alpha||0,x=this.elementsData[n.toId].alpha||0;var j=0!=w||0!=x,q=this.elementsData[S].level,A=this.elementsData[t].level,$=this.elementsData[I].level,O=(this.math3d.cameraPos.z,1e3);if(I==t?q>A?(s.y=Math.min(s.y,-O),y.y=Math.min(y.y,-O),s.x+=k,y.x+=k,k=r(k,H)):A>q?(s.y=Math.max(s.y,this.math3d.windowH+O),y.y=Math.max(y.y,this.math3d.windowH+O),s.x+=b,y.x+=b,b=r(b,5*H)):(s.y=o.range(s.y,20,.6*this.math3d.windowH),y.y=o.range(y.y,20,.6*this.math3d.windowH),s.x+=C,y.x+=C,C=r(C,H),t>S&&(n.from.x<n.to.x?(s.x=Math.min(s.x,-O),y.x=Math.min(y.x,-O),s.y+=M,y.y+=M,M=r(M,H)):(s.x=Math.max(s.x,this.math3d.windowW+O),y.x=Math.max(y.x,this.math3d.windowW+O),s.y+=E,y.y+=E,E=r(E,H)))):S==t&&($>A?(a.y=Math.min(s.y,-O),g.y=Math.min(g.y,-O),a.x+=k,g.x+=k,k=r(k,H)):A>$?(a.y=Math.max(a.y,this.math3d.windowH+O),g.y=Math.max(g.y,this.math3d.windowH+O),a.x+=b,g.x+=b,b=r(b,5*H)):(a.y=o.range(a.y,20,.6*this.math3d.windowH),g.y=o.range(g.y,20,.6*this.math3d.windowH),a.x+=C,g.x+=C,C=r(C,H),t>I&&(n.to.x<n.from.x?(a.x=Math.min(a.x,-O),g.x=Math.min(g.x,-O),a.y+=M,g.y+=M,M=r(M,H)):(a.x=Math.max(a.x,this.math3d.windowW+O),g.x=Math.max(g.x,this.math3d.windowW+O),a.y+=E,g.y+=E,E=r(E,H))))),j&&i&&(n.fromId==t||n.toId==t)&&p){var v=new e;if(s.x>d&&s.x<this.math3d.windowW-u&&s.y>h&&s.y<this.math3d.windowH-l&&a.x>d&&a.x<this.math3d.windowW-u&&a.y>h&&a.y<this.math3d.windowH-l){if(n.fromId==t){var R="t";v.x=a.x,v.y=a.y}else{var R="f";v.x=s.x,v.y=s.y}var N=700,X=600;Math.abs(v.x-this.math3d.centerX)<.5*N&&(v.y=o.outsideRange(v.y,this.math3d.centerY-.5*X,this.math3d.centerY+.8*X),"t"==R?a.y=v.y:s.y=v.y)}else{var Z=new e;n.fromId==t?(Z.x=s.x,Z.y=s.y):(Z.x=a.x,Z.y=a.y);for(var Y=[s.x,y.x,g.x,a.x],W=[s.y,y.y,g.y,a.y],_=1e8,B=0,G=[],V=0;4>V;V++){var Q=o.computeIntersections(Y,W,P[V],L[V],Z,this.ctx),U=o.distance(Q,Z);_>U&&(Q.x<=d+10||Q.x>=this.math3d.windowW-u-10||Q.y<=h+10||Q.y>=this.math3d.windowH-l-10)&&(_=U,B=V),G.push(Q)}v=G[B]}var J,K;n.fromId==t?(J=this.elementsData[n.toId].title,K=n.toId):(J=this.elementsData[n.fromId].title,K=n.fromId),v.x=o.range(v.x,d,this.math3d.windowW-u),v.y=o.range(v.y,h,this.math3d.windowH-l),v=this.checkLabelsPos(v,D),D.push(v),n.setTxt(v,J,3==B?!0:!1,K)}else n.hideLabel();j&&n.render(this.ctx,s,a,y,g,w,x,m)}}else n.hideLabel()},a.prototype.checkLabelsPos=function(t,e,i){for(var n=0;n<e.length;n++)Math.abs(t.y-e[n].y)<13&&Math.abs(t.x-e[n].x)<150&&(t.y>.8*this.math3d.windowH||1==i?(t.y-=15,t=this.checkLabelsPos(t,e,!0)):(t.y+=15,t=this.checkLabelsPos(t,e)));return t},a.prototype.getElementById=function(t){for(var e=0;e<this.elementsData.length;e++)if(this.elementsData[e].id==t)return e;return-1},a.prototype.highlightRoute=function(t){this.isRouteHighlighted=!0;for(var e=0;e<t.length-1;e++)for(var i=t[e],n=t[e+1],o=0;o<this.connectionsData.length;o++)this.connectionsData[o].id1==i&&this.connectionsData[o].id2==n&&this.connections[o].highlight(this.getElementById(n));for(var e=0;e<this.connections.length;e++)1!=this.connections[e].isHighlighted&&this.connections[e].hide()},a.prototype.dehighlightRoute=function(){if(1==this.isRouteHighlighted){for(var t=0;t<this.connections.length;t++)this.connections[t].dehighlight(),this.connections[t].show();this.isRouteHighlighted=!1}},a}),define("app/modules/BgImgData.class",["jquery","hv/util/MathX"],function(){function t(){this.w,this.h,this.img,this.cont,this.isLoaded=!1,this.isHidden=!1,this.imgW,this.imgH,this.x,this.y,this.tDifX=0,this.tDifY=0,this.difX=0,this.difY=0,this.s}return t}),define("jqueryeasing",["jquery"],function(){}),define("app/modules/DotsNavigation.class",["jquery","hv/util/MathX","app/Helpers","app/Config","jqueryeasing"],function(t,e,i,n){function o(e){this.isClicked=!1,this.cont=e,this.elNo=[],this.el,this.levelsNo=t(".level",this.cont).length,this.init(),this.addListeners(),this.dotsnav=t("#dotsnavigationid"),this.checkIfRouteIsOff()
}return o.prototype.setWindowSize=function(t){this.w=t},o.prototype.init=function(){this.$text=t(".dotsnav"),this.el=t(".element",this.cont),this.$links=t(".element a",this.cont);var e=this;this.cont.on("click",".level > a",function(t){t.preventDefault(),e.onElementLvl(this),e.el.trigger("wos-dots-nav-lvl-click")}),this.cont.on("click",".element > a",function(t){t.preventDefault(),e.onElement(this),e.el.trigger("wos-dots-nav-el-click")});for(var i=t(".level",this.cont),n=0;n<i.length;n++)this.elNo[n]=t("li",i[n]).length;this.openLevel(-1),t(this.cont).on("mouseleave",function(){e.isClicked=!1})},o.prototype.onElementLvl=function(e){this.isClicked=!1,this.openLevel(t(e).data("id")),t(document).trigger("onclicklvl",[t(e).data("id")]),this.isClicked=!0},o.prototype.onElement=function(e){this.isClicked=!1,t(document).trigger("onclickhref",[t(e).attr("href")])},o.prototype.openLevel=function(e){if(this.currentLevel!=e&&!this.isClicked){this.currentLevel=e;for(var i=t(".level",this.cont),n=0;n<this.levelsNo;n++)n==this.levelsNo-e?t(i[n]).css({"max-height":17*(this.elNo[n]+1)+3+"px"}):t(i[n]).css({"max-height":"14px"})}},o.prototype.activate=function(t){if(this.currentId!=t){var e=this.$links.filter('[href="#'+t+'"]');if(0!==e.length){var i=e.parents(".element").eq(0);this.el.removeClass("highlighted"),this.currentId=t,i.addClass("highlighted"),this.openLevel(i.parent().data("id"))}}},o.prototype.addListeners=function(){var t=this;this.$text.on("mouseenter",function(){t.onMouseEnter()}),this.$text.on("mouseleave",function(){t.onMouseLeave()})},o.prototype.onMouseEnter=function(){t(".level").css({width:"240px"})},o.prototype.onMouseLeave=function(){t(".level").css({width:"30px"})},o.prototype.checkIfRouteIsOff=function(){this.isRouteOff="true"==n.get("isRouteNetworkOff")?!0:!1},o}),define("app/3d/World3d.class",["jquery","app/3d/Point.class","app/3d/Point3d.class","app/3d/Math3d.class","app/3d/Camera3d.class","app/3d/Elements3d.class","app/3d/Lines3d.class","hv/util/MathX","app/modules/DotsNavigation.class","app/Config"],function(t,e,i,n,o,s,a,r,c,h){function l(t,e){this.elements=[],this.elementsData,this.connections=[],this.connectionsData,this.counter=0,this.c=t,this.ctx=e,this.bd_lastTime=0}var d,u,p,f,m,y,g=!0,v=!1,w=!1;l.prototype.build=function(e,i,r){this.elementsData=e,this.connectionsData=i,this.autoroutesData=r;var l=this;p=new n,d=new o(p,(e.length-1)*s.EL_Z_DIFF,this.ctx),m=new s(this.elementsData,p,d),t(m).bind("onclick",function(t,e){l.onElement(e)}),t(m).bind("onlvl1linkclick",function(t,e){l.onLvl1Element3dLinkClick(e)}),t(m).bind("onlinkclick",function(t,e){l.onElement3dLinkClick(e.href,e.pos)}),f=new a(m.elements,this.elementsData,this.connectionsData,this.autoroutesData,this.ctx,p),t(f).bind("onclick",function(t,e){l.gotoElement(e)}),y=new c(t("#dotsnavigationinnerid"),this.elementsData),t(document).bind("onclickhref",function(t,e){l.gotoElementHref(e)}),t(document).bind("onclicklvl",function(t,e){l.gotoLvl(e);f.dehighlightRoute()}),this.fourthLevelPos=this.getFourthLayerZ(),"true"==h.get("isRouteNetworkOff")?(this.isRouteOff=!0,d.setMaxZPos(this.getFourthLayerZ()-5e3)):(this.isRouteOff=!1,d.setMaxZPos(m.getMaxZPos()));m.getElementPos(0);window.changePage=function(t){void 0!=t&&l.gotoElementHref("baidu-pano-"+(parseInt(t)+1))}},l.prototype.onEF=function(){d.countNextPos(),this.findCurrentCameraPos(),w||this.redraw()},l.prototype.setBgPos=function(){var t=m.closest?m.closest.data.level:0;u.setPos(d.position.x,d.position.y,d.position.z,t)},l.prototype.stop=function(){w=!0},l.prototype.play=function(){w=!1},l.prototype.show=function(){t("#world3dcontid").css({display:"block"})},l.prototype.hide=function(){t("#world3dcontid").css({display:"none"})},l.prototype.isRunning=function(){return!w},l.prototype.isPaused=function(){return!g},l.prototype.pause=function(){g=!1},l.prototype.unpause=function(){g=!0,v=!1},l.prototype.moveCamera=function(t,e,i){d.move(t,e,i),v=!1,f.isRouteHighlighted&&x!=m.closest.index&&f.dehighlightRoute()},l.prototype.setPositionDif=function(t,e){d.setPositionDif(t,e)},l.prototype.redraw=function(){this.counter=++this.counter%3,this.clear();var e=m.closest;t(".linescanvascont").css({transform:"translateZ("+(e.zindex-1)+"px)"}),f.renderConnections(m.closest.index,m.isClosestVisible()),m.render(this.counter)},l.prototype.clear=function(){this.ctx.clearRect(0,0,this.c.width,this.c.height)},l.prototype.setCenter=function(t,e){p.setCenter(t,e)},l.prototype.setWindowSize=function(t,e){p.setWindowSize(t,e),y&&y.setWindowSize(t,e)},l.prototype.onElement=function(t){Math.abs(t.getPosition().z+this.getCameraPos().z)<2e3?"1"==t.data.level?this.onLvl1Element3dLinkClick(t.index):m.onAnchor(t):this.gotoElement(t.index)},l.prototype.onLvl1Element3dLinkClick=function(t){f.dehighlightRoute(),f.highlightRoute(this.autoroutesData[parseInt(t,10)]),this.gotoElementHref(this.autoroutesData[parseInt(t,10)][1])},l.prototype.onElement3dLinkClick=function(){},l.prototype.hideLoader=function(){m.hideLoader()};var x=-1;return l.prototype.gotoPrev=function(){do--x;while(x>=0&&1==m.elements[x].invisible);x=Math.max(x,0),this.gotoCurrent(),f.dehighlightRoute()},l.prototype.gotoNext=function(){do++x;while(x<=this.elementsData.length-1&&1==m.elements[x].invisible);x=Math.min(x,this.elementsData.length-1),this.gotoCurrent(),f.dehighlightRoute()},l.prototype.gotoElement=function(t){x=t;var e=m.elements[x];return history.replaceState&&history.replaceState(null,"Element","#"+e.id),this.gotoCurrent()},l.prototype.gotoElementHref=function(t){var e=this.findElementIdByHref(t);return this.gotoElement(e)},l.prototype.gotoLvl=function(t){var e=m.getLevelFirstElement(t),i=m.elements[e];this.gotoElementHref("#"+i.id)},l.prototype.gotoCurrent=function(){var e=m.elements[x],i=e.getPosition();return d.setTargetXY(i.x,-i.y),d.setTargetZ(-i.z),d.isGoingDirectly=!0,v=!0,this.pause(),"4"==this.elementsData[x].level&&t(this).trigger("onlevelfour",[+x-parseInt(m.getLevelFirstElement("4"),10)]),e.id},l.prototype.findElementIdByHref=function(t){0===t.indexOf("#")&&(t=t.slice(1));for(var e=0;e<this.elementsData.length;e++)if(this.elementsData[e].id==t)return e;return 0},l.prototype.findCurrentCameraPos=function(){m.findClosest();var t=m.closest,e=m.secondClosest,i=t.getPosition(),n=e.getPosition();d.findCurrentCameraPos(i,n),t=m.findClosestElement(function(t){return!t.invisible}),y.activate(t.id),v&&y.openLevel(this.elementsData[x].level),m.closest.index==x&&(f.isRouteHighlighted&&v&&this.autoOpen(),v=!1);var o=(new Date).getTime();if(o-this.bd_lastTime>500){var s=window.parent;s.receiveMessage&&s.receiveMessage(t.id),this.bd_lastTime=o}},l.prototype.autoOpen=function(){var t=parseInt(this.elementsData[x].level);if(t>1&&4>t){var e=m.getElementHref(x),i=this;setTimeout(function(){i.onElement3dLinkClick(e,m.getLoaderPosition(x))},1200)}},l.prototype.getCameraPos=function(){return d.position},l.prototype.getFourthLayerZ=function(){return m.getFourthLayerZ()},l}),define("hv/animation/AnimationFrame",[],function(){for(var t=0,e=["ms","moz","webkit","o"],i=window.requestAnimationFrame,n=window.cancelAnimationFrame,o=0;o<e.length&&!i;++o)i=window[e[o]+"RequestAnimationFrame"],n=window[e[o]+"CancelAnimationFrame"]||window[e[o]+"CancelRequestAnimationFrame"];var s=navigator.userAgent.toLowerCase().indexOf("trident")>=0;return(s||!i)&&(i=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+n)},n);return t=i+n,o}),(s||!n)&&(n=function(t){clearTimeout(t)}),{request:function(){return i.apply(null,arguments)},cancel:function(){return n.apply(null,arguments)}}}),define("hv/browser/Window",["jquery"],function(t){function e(){n=r.width(),o=r.height()}function i(){s=r.scrollTop(),a=r.scrollLeft()}var n,o,s,a,r=t(window);r.resize(e),r.scroll(i),e(),i();var c={width:function(){return n},height:function(){return o},scrollTop:function(){return s},scrollLeft:function(){return a},resize:function(){r.resize.apply(r,arguments)}};return c}),define("app/controllers/Dictionary",["jquery"],function(t){var e={next:"Weiter auf Route - %themeRouteName%",prev:"Zurück auf Route - %themeRouteName%"},e=t.extend({},e,window.app_dictionary);return{get:function(t){return e[t]},set:function(t){e=t}}}),define("app/modules/RoundMask.class",["jquery","hv/util/MathX"],function(t){function e(){this.circle=document.getElementById("contentcontainerid"),this.inner=document.getElementById("contentinnercontid"),this.$circle=t(this.circle),this.x,this.y,this.isRetina=this.checkRetina()}return e.prototype.show=function(e,i,n){function o(t){t.stopPropagation();var e=t.originalEvent.propertyName;"-webkit-mask-size"===e&&(s.$circle.off("webkitTransitionEnd transitionend transitionEnd msTransitionEnd oTransitionEnd",o),s.$circle.css({"-webkit-mask-image":"none"}),n&&n(),s.$circle.trigger("showTransitionEnd.roundMask"))}var s=this;this.ww=t(window).width(),this.wh=t(window).height(),this.x=e||.5*this.ww,this.y=i||.5*this.wh;var a=this.$circle,r=Math.max(Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2)),Math.sqrt(Math.pow(s.x,2)+Math.pow(s.wh-s.y,2)),Math.sqrt(Math.pow(s.ww-s.x,2)+Math.pow(s.y,2)),Math.sqrt(Math.pow(s.ww-s.x,2)+Math.pow(s.wh-s.y,2)));if(Modernizr.cssmask)a.trigger("showTransitionStart.roundMask"),a.css({"-webkit-mask-size":"0px",transition:"",position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden",display:"block",transition:"none"}),a.css({transition:"-webkit-mask-size 700ms linear","-webkit-mask-size":2*r+200+"px","-webkit-mask-position":Math.min(this.x/this.ww*100,100)+"% "+Math.min(this.y/this.wh*100,100)+"%"}).on("webkitTransitionEnd transitionend transitionEnd msTransitionEnd oTransitionEnd",o);else{maxr=r+50,this.tmp=30;var c=this;c.render(c.x,c.y,0),t(this).animate({tmp:maxr/2},{duration:500,start:function(){this.$circle.trigger("showTransitionStart.roundMask")},step:function(t){c.render(c.x,c.y,t)},complete:function(){this.circle.style.left="0px",this.circle.style.top="0px",this.circle.style.width="100%",this.circle.style.height="100%",this.inner.style.left="0px",this.inner.style.top="0px",this.inner.style.width="100%",this.inner.style.height="100%",this.circle.style.borderRadius="0px",this.circle.style.webkitMask="none",this.$circle.trigger("showTransitionEnd.roundMask"),n&&n()}})}},e.prototype.hide=function(e){function i(t){t.stopPropagation();var o=t.originalEvent.propertyName;"-webkit-mask-size"===o&&(n.$circle.off("webkitTransitionEnd transitionend transitionEnd msTransitionEnd oTransitionEnd",i),e&&e(),n.$circle.trigger("hideTransitionEnd.roundMask"))}if(t("#js-world3d-container").css({visibility:"visible","pointer-events":"",display:""}),this.ww=t(window).width(),this.wh=t(window).height(),this.x=this.x||.5*this.ww,this.y=this.y||.5*this.wh,Modernizr.cssmask){this.$circle.trigger("hideTransitionStart.roundMask");var n=this;this.$circle.css({"-webkit-mask-image":"","-webkit-mask-size":"0px",transition:"-webkit-mask-size 600ms linear"}).on("webkitTransitionEnd transitionend transitionEnd msTransitionEnd oTransitionEnd",i)}else{var o=Math.sqrt(this.ww*this.ww+this.wh*this.wh);o=Math.min(2e3,o),this.tmp=o/2;var s=this;t(this).animate({tmp:0},{duration:500,start:function(){this.$circle.trigger("hideTransitionStart.roundMask")},step:function(t){s.render(s.x,s.y,t)},complete:function(){e&&e(),this.$circle.trigger("hideTransitionEnd.roundMask")}})}},e.prototype.checkRetina=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(t).matches?!0:!1},e.prototype.render=function(t,e,i){this.circle.style.position="absolute",this.circle.style.left=t-i+"px",this.circle.style.top=e-i+"px",this.circle.style.width=i+i+"px",this.circle.style.height=i+i+"px",this.circle.style.borderRadius="100%",this.circle.style.overflow="hidden",this.inner.style.position="absolute",this.inner.style.left=i-t+"px",this.inner.style.top=i-e+"px",this.inner.style.width=this.circle.parentElement.clientWidth+"px",this.inner.style.height=this.circle.parentElement.clientHeight+"px",this.circle.style.webkitMask="",this.circle.style.webkitMaskSize=i+i+"px"},e}),define("app/modules/Intro.class",["jquery"],function(t){function e(){this.$outercontainer=t("#introcontentid"),this.$container=t(".introinner"),this.$enter=t(".introcalltoaction"),this.$loader=t(".introloader"),this.$background=t(".introbackground"),this.init()}return e.prototype.init=function(){this.$enter.css({opacity:"0"})},e.prototype.show=function(){},e.prototype.loaded=function(){Modernizr.csstransitions?(this.$loader.css({opacity:0,visibility:"hidden",transition:"visibility 100ms, opacity 100ms"}),this.$enter.css({opacity:1,transition:"opacity 700ms"}),this.$background.css({opacity:0,visibility:"visible",transition:"visibility 100ms, opacity 100ms"})):(this.$loader.animate({opacity:"0"},700),this.$enter.animate({opacity:"1"},700),this.$background.animate({opacity:"0"},700))},e.prototype.hide=function(){this.$container.animate({opacity:"0",top:"-=35px"},600);var t=this;this.$outercontainer.delay(200).animate({opacity:"0"},400,function(){t.$outercontainer.remove()})},e}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},FastClick.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},FastClick.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},FastClick.prototype.determineEventType=function(t){return this.deviceIsAndroid&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(t){var e;this.deviceIsIOS&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},FastClick.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},FastClick.prototype.onTouchStart=function(t){var e,i,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},FastClick.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(t){var e,i,n,o,s,a=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=t.changedTouches[0],a=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),n=a.tagName.toLowerCase(),"label"===n){if(e=this.findControl(a)){if(this.focus(a),this.deviceIsAndroid)return!1;a=e}}else if(this.needsFocus(a))return t.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(a),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(o=a.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(a)||(t.preventDefault(),this.sendClick(a,t)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){var t=this.layer;this.deviceIsAndroid&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(t){var e,i;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(i>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===t.style.msTouchAction?!0:!1},FastClick.attach=function(t){return new FastClick(t)},"undefined"!=typeof define&&define.amd?define("vendor/fastclick",[],function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("slideshow",["vendor/fastclick","mousewheel"],function(t){function e(){t&&t.attach&&t.attach(document.body)}function i(){}var n={};return n.init=function(t){this.element=$(t),e()},n.destroy=function(){i()},n}),define("hv/util/fps",[],function(){function t(){o=l(t),e()}function e(){var t=i(),e=t-n;r+=(e-r)/c,s=1e3/r,n=t}var i,n,o,s,a=window,r=0,c=10;!function(){var t=a.performance;if(t&&(t.now||t.webkitNow)){var e=t.now?"now":"webkitNow";i=t[e].bind(t)}else i=function(){return+new Date}}();var h=a.cancelAnimationFrame||a.cancelRequestAnimationFrame,l=a.requestAnimationFrame;return function(){for(var t=["moz","webkit","o"],e=0,n=0,o=t.length;o>n&&!h;++n)h=a[t[n]+"CancelAnimationFrame"]||a[t[n]+"CancelRequestAnimationFrame"],l=h&&a[t[n]+"RequestAnimationFrame"];h||(l=function(t){var n=i(),o=Math.max(0,16-(n-e));return e=n+o,a.setTimeout(function(){t(n+o)},o)},h=function(t){clearTimeout(t)})}(),n=i(),t(),{start:function(){o||t()},stop:function(){h(o),o=!1},get:function(){return s},reset:function(){r=0},smoothing:function(t){c=Math.max(1,t)}}}),define("app/3dworld",["jquery","app/Config","hv/net/HTMLLoader","app/3d/World3d.class","hv/animation/AnimationFrame","app/controllers/Dictionary","app/3d/Elements3d.class","app/modules/RoundMask.class","app/modules/Intro.class","app/controllers/Dictionary"],function(t,e,i,n,o,s,a,r,c){function h(){ae=new c,ae.show()}function l(){if(ae.loaded(),m(),t(window).on("mousewheel",d),t(window).on("keyup",d),t(window).on("touchmove",d),t(".introinner").on("click",d),t(".js-navigation-toggle").on("click",d),t("#dotsnavigationid").on("click",d),re=setTimeout(d,7e3),L(!0),window.location.hash&&window.location.hash.length>0){d(),E();var e=window.location.hash;-1!=e.indexOf("iata=")?G.gotoLvl(4):t(document).trigger("onclickhref",[e])}else u(),setTimeout(function(){var e=t.Event("keyup");e.keyCode=38,t(document).trigger(e)},300)}function d(e){return e&&"keyup"===e.type&&(e.keyCode<37||e.keyCode>40)&&32!==e.keyCode?!1:(t(window).off("mousewheel",d),t(window).off("keyup",d),t(window).off("touchmove",d),t(".introinner").off("click",d),t(".js-navigation-toggle").off("click",d),t("#dotsnavigationid").off("click",d),ae.hide(),clearTimeout(re),p(),E(),y(),void 0)}function u(){t("#elementscontainerid").css({opacity:"0"})}function p(){Modernizr.csstransition?(t("#dotsnavigationid").css({opacity:"1",transition:"all 700ms"}),t(".js-navigation-toggle").css({opacity:"1",transition:"all 700ms"}),t("#elementscontainerid").css({opacity:"1",transition:"all 700ms"})):(t("#dotsnavigationid").animate({opacity:"1"},700),t(".js-navigation-toggle").animate({opacity:"1"},700),t("#elementscontainerid").animate({opacity:"1"},700))}function m(){X=t("#linescanvasid")[0],Z=X.getContext("2d"),j(),q(),A(),$(),G=new n(X,Z),G.build(O,R,N);var e=G.getFourthLayerZ();G.stop(),te=new i,roundmask=new r,t(document).on("opened.navigation",function(){}),g(),t(window).resize(function(){g()}),t(window).on("focus blur",function(t){ee="focus"===(t||event).type}),t(window).keydown(function(t){v(t)}),t("#js-world3d-container").mousewheel(function(t,e){var i=window.parent;i.onIframeScroll&&i.onIframeScroll(t.deltaY),b(t,e)}),navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?t(window).on("deviceorientation"+he,M):t(window).mousemove(function(t){C(t)}),de&&t(".world3d-body")[0].addEventListener("touchstart",w,!1),ie=e-a.EL_Z_DIFF,t(G.c).bind("onElement3dLinkClick",function(t,e){se=e.pos,D(e.href)}),t(document).on("click"+he,".js-content-close",function(t){t.preventDefault(),z()}),t(".swiss-logo").on("click"+he,function(e){ne==ue.subpage&&(e.preventDefault(),t(".js-content-close").trigger("click")),t(this).trigger("wos-swiss-logo-click")})}function y(){var e,i,n=t(".element3dcont"),o=0,s=4e3;n.on("mouseenter",function(){i&&clearTimeout(i),(new Date).getTime()-o>s&&(e=!G.isPaused()),G.pause()}),n.on("mouseleave",function(){o=(new Date).getTime(),e&&(i=setTimeout(function(){G.unpause()},s))})}function g(){Y=window.innerWidth,W=window.innerHeight,X.width=Y,X.height=W,_=.5*Y,B=.5*W,G&&(G.setWindowSize(Y,W),G.setCenter(_,B))}function v(t){if(ne!=ue.subpage){var e=t.keyCode||t.which;switch(e){case pe.up:G.gotoPrev();var i=window.parent;i.onIframeScroll&&i.onIframeScroll(1,"key",-1);break;case pe.down:G.gotoNext();var i=window.parent;i.onIframeScroll&&i.onIframeScroll(-1,"key",1);break;case pe.p:G.unpause();break;case pe.n:G.stop();break;case pe.m:G.play();break;case pe.space:G.isPaused()?G.unpause():G.pause()}t.preventDefault(),t.stopPropagation()}}function w(e){ne!=ue.subpage&&(U=e.touches[0].clientY,J=!1,t(".world3d-body")[0].addEventListener("touchmove",x,!1),t(".world3d-body")[0].addEventListener("touchend",k,!1))}function x(t){t.preventDefault(),K=t.touches[0].clientY-U,Math.abs(K)>30&&(J=!0),J&&t.preventDefault(),G.moveCamera(0,0,20*K),U=t.touches[0].clientY}function k(){t(".world3d-body")[0].removeEventListener("touchmove",x),t(".world3d-body")[0].removeEventListener("touchend",k)}function b(t,e){if(ne!=ue.subpage){t.preventDefault();var i,n=t.originalEvent,o=e,s=225,a=s-1;i=n.detail,i=i?o&&(f=o/i)?i/f:-i/1.35:o/120,i=1>i?-1>i?(-Math.pow(i,2)-a)/s:i:(Math.pow(i,2)+a)/s,t.delta=Math.min(Math.max(i/2,-1),1),i=3*Math.max(-1,Math.min(1,t.delta)),-1===navigator.userAgent.indexOf("Mac OS X")&&(i>0&&1>i?i=1:0>i&&i>-1&&(i=-1)),G.moveCamera(0,0,i*le*-1)}}function C(t){if(ne!=ue.subpage){var e=t.pageX/Y-.5,i=t.pageY/W-.5;G.setPositionDif(e,i)}}function M(t){if(ne!=ue.subpage){t=t.originalEvent;var e,i;if(null!==window.orientation){var n=window.orientation;-90===n||90==n?(e=t.beta,i=t.gamma):(e=t.gamma,i=t.beta)}e>40?e=40:-40>e&&(e=-40),i>40?i=40:-40>i&&(i=-40);var o=(e+40)/80*1.6,s=(i+40)/80*1.6;G.setPositionDif(o,s)}}function E(){Q||(Q=o.request(L))}function P(){o.cancel(Q),Q=!1}function L(e){var i=!1;if(e!==!0&&(Q=!1,E()),ne==ue.subpage)return P(),G.stop(),!1;var n=G.getCameraPos();n.z<ie?(ne!=ue.world&&G.play(),ne=ue.world):(ne!=ue.routenetwork&&G.stop(),ne=ue.routenetwork),G.onEF(),ne==ue.routenetwork&&(i=!1),fe==i&&(fe=!i,t("#world3dcontid").css("display",fe?"":"none"))}function D(t){T(t)}function T(e){t("#contentcontainerid").css("display","block"),t("#contentbackgroundid").css("display","block"),ne=ue.subpage,te.load(e,function(i){ce=location.href,"undefined"!=typeof ga&&null!==ga&&ga("send","pageview"),history.replaceState&&history.replaceState(null,"Detail",e);var n=t(i).filter(".js-content-container"),o=t("#contentinnercontid");o.empty(),o.css({visibility:"hidden"}),o.append(n),setTimeout(function(){I(n)},100),n.bind("content.loaded",function(){S()}),n.bind("connectionClick",function(t,e){H(e.code)})})}function S(){roundmask.show(se.left,se.top,function(){t(document).on("keydown.detailpage",function(t){t.keyCode===pe.escape&&z()}),t("#contentbackgroundid").css("display","none"),t("#js-world3d-container").css({visibility:"hidden","pointer-events":"none",display:"none"}),t(".js-navigation").css({display:"none"})}),t("#contentinnercontid").css({visibility:"visible"})}function I(t){var e=t.data("content-type");"slideshow"==e?require(["slideshow"],function(e){oe=e,oe.init(t)}):"film"==e&&require(["film"],function(e){oe=e,oe.init(t)})}function z(){t(document).off(".detailpage"),roundmask.hide(function(){t("#js-world3d-container").css({visibility:"visible","pointer-events":"",display:""}),t(".js-navigation").css({display:""}),t("#contentbackgroundid").css("display","none"),F()}),G.hideLoader()}function F(){E(),history.replaceState&&history.replaceState(null,"Detail",ce),oe.destroy(),oe=null,t("#contentinnercontid").empty(),t("#contentcontainerid").css("display","none"),ne=ue.world3d,G.hideLoader(),t("#contentbackgroundid").css("display","none")}function H(t){z(),setTimeout(function(){G.gotoLvl(4),V.openConnection(t)},505)}function j(){O=[];var e,i=t("#elementscontainerid .element3dcont");for(e=0;e<i.length;e++){var n=i.eq(e),o=n.attr("id"),s=n.data("level");O.push({id:o,level:s,title:t("h1",n).text(),el:n})}var a=-1,r=t("<div></div>");for(e=O.length-1;e>=0;e--){var c=O[e];c.level!=a&&(o="dummy-"+e,a>=0&&O.splice(e+1,0,{invisible:!0,id:o+"a",level:a,el:r}),O.splice(e+1,0,{invisible:!0,id:o+"b",level:c.level,el:r}),a=c.level)}}function q(){N=[];for(var e=t("#elementscontainerid .el-item--links"),i=0;i<e.length;i++){N[i]=[];for(var n=t("li",e[i]),o=0;o<n.length;o++)N[i].push(t("a",n[o]).attr("href").substring(1))}}function A(){R=[];for(var e=t("#elementscontainerid .element3dcont"),i=0;i<e.length;i++)for(var n=t(e[i]),o=n.attr("id"),s=t(".el-item--related li",n),a=0;a<s.length;a++){for(var r=t("a",s[a]).attr("href").substring(1),c=!1,h=0;h<R.length;h++)if(R[h].id1==r&&R[h].id2==o){c=!0;break}c||R.push({id1:o,id2:r})}}function $(){for(var t=0;t<N.length;t++)for(var e=N[t].length-1,i=0;e>i;i++){for(var n=N[t][i],o=N[t][i+1],s=!1,a=0;a<R.length;a++)if(R[a].id1==o&&R[a].id2==n||R[a].id1==n&&R[a].id2==o){s=!0;break}s||R.push({id1:n,id2:o})}}var O,R,N,X,Z,Y,W,_,B,G,V,Q,U,J,K,te,ee,ie,ne,oe,se,ae,re,ce,he=".world3d",le=750,de="ontouchstart"in window,ue={world:"world",routenetwork:"routenetwork",subpage:"subpage"},pe={left:37,up:38,right:39,down:40,plus:107,minus:109,zero:96,one:97,two:98,o:79,p:80,m:77,n:78,space:32,escape:27},fe=!0;require(["hv/util/fps"],function(e){e.smoothing(120);var i=0,n=0;setInterval(function(){if(!G.isRunning()||!ee)return e.reset(),void 0;var o=e.get();if(15>o?n++:n=0,n>4)switch(i){case 0:t(".bgnearcont > img").fadeOut("fast"),i++;break;case 1:t(".bgmidcont > img, .bgfarcont > img").fadeOut("fast"),i++;break;case 2:t("#cloudscontainerid").fadeOut("fast"),i++;break;case 3:t(".linescanvascont").fadeOut("fast"),i++}else if(o>55){if(!(i>0))return;switch(i--,i){case 0:t(".bgnearcont > img").fadeIn();break;case 1:t(".bgmidcont > img, .bgfarcont > img").fadeIn();break;case 2:t("#cloudscontainerid").fadeIn();break;case 3:t(".linescanvascont").fadeIn()}}},5e3)});var me={};return me.init=function(e){this.element=t(e),h()},me.onPageLoaded=function(){l()},me}),requirejs.config({paths:{jquery:"/static/common/js/pano/jquery-1.11.1.min",tpl:"vendor/require/tpl",mousewheel:"/static/common/js/pano/jquery.mousewheel",jqueryeasing:"/static/common/js/pano/jquery.easing.1.3"},shim:{jquery:{exports:"jQuery"},"app/plugins":{deps:["jquery"]},mousewheel:{deps:["jquery"]},jqueryeasing:{deps:["jquery"]}}}),function(t){function e(){}for(var i,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");i=n.pop();)t[i]=t[i]||e}(function(){try{return console.log(),window.console}catch(t){return window.console={}}}()),require(["jquery","app/Config","app/plugins","mousewheel"],function(t,e){function i(){o&&s&&(t("html").removeClass("is-not-loaded").addClass("is-loaded"),t("body").hasClass("world3d-body")&&a.onPageLoaded())}if("undefined"==typeof n||"undefined"==typeof n.log)var n={log:function(){}};if(!Modernizr.csstransforms)return window.location.replace(e.get("errorPageOldBrowser")),!1;if(t(window).width()<680||t(window).height()<450||window.innerWidth<680||window.innerHeight<450)var o,s,a;t(function(){var e=t("body");e.hasClass("world3d-body")?require(["app/3dworld"],function(t){a=t,t.init(e),o=!0,i()}):e.hasClass("content-slideshow-body")?require(["slideshow"],function(t){t.init(e),o=!0,i()}):e.hasClass("content-film-body")&&require(["film"],function(t){t.init(e),o=!0,i()})}),function(){function t(){s=!0,i()}var e=setInterval(function(){"complete"===document.readyState&&(t(),clearInterval(e))},100)}()}),define("main",function(){});